/* Layout Fix - Prevent Overlaps & Mobile Responsiveness */

/* ============================================
   GLOBAL OVERFLOW PREVENTION
   ============================================ */

html {
  scroll-behavior: smooth;
  overflow-x: hidden;
}

body {
  overflow-x: hidden;
  min-width: 320px;
}

#root {
  overflow-x: hidden;
  min-width: 320px;
}

/* Fix any z-index conflicts */
[data-theme="dark"],
[data-theme="light"] {
  isolation: isolate;
}

/* ============================================
   MAIN CONTENT LAYOUT
   ============================================ */

/* Main content responsive margin */
@media (min-width: 1024px) {
  .main-content {
    margin-left: 280px !important;
  }
}

@media (max-width: 1023px) {
  .main-content {
    margin-left: 0 !important;
    width: 100% !important;
  }
  
  /* Make grids single column on mobile */
  div[style*="grid-template-columns"] {
    grid-template-columns: 1fr !important;
  }
}

/* Ensure content doesn't go under navbar */
.page-container,
div[style*="padding: var(--space-8)"] {
  position: relative;
  z-index: 1;
  max-width: 100%;
  overflow-x: hidden;
}

/* ============================================
   MOBILE RESPONSIVE FIXES
   ============================================ */

/* Mobile: reduce padding */
@media (max-width: 768px) {
  div[style*="padding: var(--space-8)"] {
    padding: var(--space-4) !important;
  }
  
  /* Reduce page title sizes on mobile */
  h1 {
    font-size: var(--text-2xl) !important;
  }
  
  h2 {
    font-size: var(--text-xl) !important;
  }
  
  /* Stack flex items on mobile */
  .filter-row,
  [style*="display: flex"][style*="gap"] {
    flex-wrap: wrap !important;
  }
  
  /* Full width buttons on mobile */
  [style*="margin-left: auto"] {
    margin-left: 0 !important;
    width: 100% !important;
    margin-top: var(--space-2);
  }
}

/* Extra small devices */
@media (max-width: 480px) {
  div[style*="padding: var(--space-8)"] {
    padding: var(--space-3) !important;
  }
  
  /* Single column grids */
  [style*="grid-template-columns: repeat(2"],
  [style*="grid-template-columns: repeat(3"],
  [style*="grid-template-columns: repeat(4"] {
    grid-template-columns: 1fr !important;
  }
}

/* ============================================
   TABLE RESPONSIVENESS
   ============================================ */

/* Ensure table containers scroll horizontally */
.table-responsive,
[class*="tableContainer"],
[class*="tableWrapper"] {
  overflow-x: auto;
  -webkit-overflow-scrolling: touch;
  max-width: 100%;
}

/* Fix table overflow on mobile */
@media (max-width: 768px) {
  table {
    font-size: var(--text-sm);
    min-width: 600px; /* Force horizontal scroll if needed */
  }
  
  table th,
  table td {
    padding: var(--space-2) var(--space-3);
    white-space: nowrap;
  }
  
  /* Allow text wrapping for key columns */
  table td:first-child,
  table td:nth-child(2) {
    white-space: normal;
    min-width: 120px;
  }
}

/* ============================================
   CHART RESPONSIVENESS
   ============================================ */

/* Responsive chart containers */
@media (max-width: 640px) {
  div[style*="height: '300px'"],
  div[style*="height: '350px'"],
  div[style*="height: 300px"],
  div[style*="height: 350px"],
  div[style*="height: 280px"] {
    height: 220px !important;
    min-height: 220px !important;
  }
}

/* ============================================
   CARD RESPONSIVENESS  
   ============================================ */

@media (max-width: 768px) {
  /* Reduce card padding on mobile */
  [class*="ModernCard"],
  [class*="Card"] {
    padding: var(--space-3) !important;
  }
  
  /* Stack card headers */
  [class*="CardHeader"] {
    flex-direction: column !important;
    align-items: flex-start !important;
    gap: var(--space-2) !important;
  }
}

/* ============================================
   FORM RESPONSIVENESS
   ============================================ */

@media (max-width: 640px) {
  /* Full width inputs on mobile */
  input,
  select,
  textarea {
    max-width: 100% !important;
  }
  
  /* Stack form fields */
  .form-row,
  [class*="formRow"],
  [style*="display: grid"][style*="gap"] {
    grid-template-columns: 1fr !important;
  }
}

/* ============================================
   BUTTON RESPONSIVENESS
   ============================================ */

@media (max-width: 480px) {
  /* Full width buttons on very small screens */
  button[class*="Button"]:not([class*="ghost"]):not([class*="icon"]) {
    width: 100% !important;
    justify-content: center !important;
  }
}

/* ============================================
   MODAL RESPONSIVENESS
   ============================================ */

@media (max-width: 640px) {
  /* Full width modals on mobile */
  [class*="modal"],
  [class*="Modal"] {
    width: calc(100% - 32px) !important;
    max-width: calc(100% - 32px) !important;
    margin: 16px !important;
  }
}

/* ============================================
   UTILITY CLASSES
   ============================================ */

.hide-on-mobile {
  display: block;
}

.show-on-mobile {
  display: none;
}

@media (max-width: 768px) {
  .hide-on-mobile {
    display: none !important;
  }
  
  .show-on-mobile {
    display: block !important;
  }
}

/* Flex utilities for responsive */
.flex-wrap-mobile {
  flex-wrap: nowrap;
}

@media (max-width: 768px) {
  .flex-wrap-mobile {
    flex-wrap: wrap !important;
  }
}

/* Text truncation */
.text-truncate {
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

/* Safe area insets for notched phones */
@supports (padding: max(0px)) {
  .safe-area-padding {
    padding-left: max(var(--space-4), env(safe-area-inset-left));
    padding-right: max(var(--space-4), env(safe-area-inset-right));
    padding-bottom: max(var(--space-4), env(safe-area-inset-bottom));
  }
}

